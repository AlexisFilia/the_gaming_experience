<div class="container">

  <div class="filter-container">
    <h1>Kestucherches mon Bichon?</h1>
    <div class="filter-form-container">
      <%= form_tag game_sessions_path, method: :get do %>
        <%= text_field_tag :query,
          params[:query],
          class: "form-control",
          placeholder: "Find a city or/and a date"
        %>
        <%= submit_tag "Search", class: "btn btn-flat resize-btn" %>
      <% end %>
    </div>
  </div>


</div>

<div class="personal-container">
  <button class="btn-ghost" id="map-toggler">Hide Map</button>

  <div class="map-and-cards-container" id="map-and-cards-container">

    <div class="cards-container" id="cards-container">
      <div class="cards">
        <% @game_sessions.each do |game_session| %>
          <% if game_session.booked == false && game_session.date >= DateTime.now %>
            <div class="card" onclick="location.href='<%= game_session_path(game_session) %>'">

                <div class="card-left-side">
                  <div class="card-date"><%= game_session.date %></div>
                  <div class="card-city"><%= game_session.city %></div>
                </div>

                <div class="card-middle">
                  <div class="card-game-name"><%= game_session.game.name %></div>
                  <div class="card-game-description"><%= game_session.description %></div>
                  <% if game_session.booked == true %>
                    <i class="far fa-check-circle booked"></i>
                  <% end %>
                </div>

                <div class="card-right-side">
                  <div class="card-price"><%= game_session.price %>â‚¬</div>
                  <div class="card-avatar-container">
                    <% if game_session.creator.photo.attached? %>
                      <div class="card-avatar" style="background-image:url('<%= cl_image_path game_session.creator.photo.key %>')"></div>
                    <% else %>
                      <div class="card-avatar" style="background-image:url('<%= @image_placeholder %>')"></div>
                    <% end %>
                  </div>
                </div>

            </div>
          <% end %>
        <% end %>
      </div>
    </div>

    <div class="map-container" id="map-container">
       <div
        id="map"
        data-markers="<%= @markers.to_json %>"
        data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
      >
      </div>
    </div>
  </div>
</div>
